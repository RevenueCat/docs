---
title: "Using the SDK with your own IAP Code (formerly: Observer Mode)"
sidebar_label: Using the SDK with your own IAP Code
slug: finishing-transactions
excerpt: Using RevenueCat without changing existing purchase code
hidden: false
---

If you already have your own in-app purchase handling logic in your app and want to start using RevenueCat alongside it, you might need to set the SDK configuration option that your app will **complete the purchases itself** (configuration option `purchasesAreCompletedBy`, see code below). Completing a purchase tells the device billing library that a purchase has been processed and can be discarded. RevenueCat does this by default, however, this may interfere with pre-existing purchase handling code in your app.

If you set the SDK option that your app will complete purchases itself, you can still make use of most of RevenueCat's features, without replacing your existing purchase handling code. If you're making purchases on iOS, be sure to set the `storeKitVersion` to the version of StoreKit you're using.

:::info Observer mode
The setting where your app completes purchases was formerly called "observer mode". Older versions of the SDK (currently including the iOS and cross-platform SDKs) still refer to this terminology.
:::

:::warning Purchases need to manually be synced on Amazon Appstore
For Amazon Appstore apps, you will need to [call the `syncAmazonPurchase()` method](/platform-resources/amazon-platform-resources#syncing-purchases-when-your-app-is-completing-transactions) after making a purchase using your own IAP code.
:::

### SDK Configuration

import om1 from "@site/code_blocks/migrating-to-revenuecat/observer-mode_1.swift?raw";
import om2 from "@site/code_blocks/migrating-to-revenuecat/observer-mode_2.m?raw";
import om4 from "@site/code_blocks/migrating-to-revenuecat/observer-mode_4.java?raw";
import om5 from "@site/code_blocks/migrating-to-revenuecat/observer-mode_5.dart?raw";
import om6 from "@site/code_blocks/migrating-to-revenuecat/observer-mode_6.cs?raw";
import om7 from "@site/code_blocks/migrating-to-revenuecat/observer-mode_7.js.txt?raw";

<RCCodeBlock
  tabs={[
    {
      type: "swift",
      content: om1,
    },
    {
      type: "objc",
      content: om2,
    },
    {
      type: "java",
      content: om4,
    },
    {
      type: "flutter",
      content: om5,
    },
    {
      type: "react-native",
      content: om7,
      name: "React Native",
    },
    {
      type: "unity",
      content: om6,
    },
  ]}
/>

## Syncing Past Subscriptions

When using RevenueCat with your own IAP code, historical subscriptions won't automatically appear in the dashboard. To sync past subscriptions, you'll need to call `syncPurchases()` after configuring the SDK. This method will:

- read the local App Store receipt (iOS) or query the billing library (Android) for existing transactions
- process historical transactions and associate them with the current appUserID
- activate entitlements and display the data in the dashboard

:::info Best Practice
Call `syncPurchases()` after a user logs in, rather than on every app launch. Calling it too frequently can cause unnecessary delays or disrupt the user experience, especially if your app has a large user base or complex entitlements.
:::

:::warning
For Amazon Appstore apps, you'll need to manually sync each purchase using `syncAmazonPurchase()` after making a purchase. See our [Amazon Platform Resources](/platform-resources/amazon-platform-resources#syncing-purchases-when-your-app-is-completing-transactions) for more details.
:::

### Restore Behavior Considerations

When syncing purchases, RevenueCat will handle existing subscriptions based on your [restore behavior](/projects/restore-behavior) setting. This setting determines what happens when a user's purchases are already associated with a different App User ID.

For more information about restoring purchases and best practices, see our [Restoring Purchases](/getting-started/restoring-purchases) guide.
