---
title: Airbridge
slug: airbridge
excerpt: Integrate Purchases SDK with Airbridge for precise revenue tracking
hidden: false
---

With our Airbridge integration you can:

- Attribute subscription revenue and lifecycle events to the Airbridge campaigns that drove them.
- Stream trial conversions, renewals, cancellations, and more directly from RevenueCat without relying on an app in the foreground.
- Continue measuring long-tail revenue from each campaign as subscriptions renew over time.

### Integration at a Glance

| Includes Revenue | Supports Negative Revenue | Sends Sandbox Events | Includes Customer Attributes | Sends Transfer Events |                                       Optional Event Types                                        |
| :--------------: | :-----------------------: | :------------------: | :--------------------------: | :-------------------: | :-----------------------------------------------------------------------------------------------: |
|        ✅        |            ❌             |          ✅          | Standard Reserved Attributes |          ❌           | `non_subscription_purchase_event` `expiration_event` `billing_issue_event` `product_change_event` |

## 1. Install the Airbridge SDK

Set up the latest Airbridge SDK in every platform where you collect purchases before enabling the integration. Refer to the [Airbridge developer documentation](https://developers.airbridge.io/) for the most up-to-date installation instructions.

## 2. Send device data to RevenueCat

Airbridge matches RevenueCat events to campaign cohorts using device and advertising identifiers. No subscriber attributes are strictly required for events to be sent, but collecting the following [Customer Attributes](/customers/customer-attributes) is recommended for accurate attribution:

| Key                | Description                                                                                                                                     | Required         |
| :----------------- | :---------------------------------------------------------------------------------------------------------------------------------------------- | :--------------- |
| `$airbridgeDevice` | Airbridge DeviceUUID. The unique Airbridge identifier for the device                                                                            | ✅               |
| `$idfa`            | iOS [advertising identifier](https://developer.apple.com/documentation/adsupport/asidentifiermanager/1614151-advertisingidentifier) UUID        | ❌ (recommended) |
| `$gpsAdId`         | Google [advertising identifier](https://developers.google.com/android/reference/com/google/android/gms/ads/identifier/AdvertisingIdClient.Info) | ❌ (recommended) |
| `$idfv`            | iOS [vendor identifier](https://developer.apple.com/documentation/uikit/uidevice/1620059-identifierforvendor) UUID                              | ❌ (recommended) |
| `$ip`              | The IP address of the device                                                                                                                    | ❌ (recommended) |

These properties can be set manually, like any other [Customer Attributes](/customers/customer-attributes), or through the helper methods `collectDeviceIdentifiers()` and `setAirbridgeDeviceID()`.

import swiftContent from "@site/code_blocks/integrations/attribution/airbridge_1.swift?raw";
import kotlinContent from "@site/code_blocks/integrations/attribution/airbridge_2.kt?raw";

<RCCodeBlock
  tabs={[
    { type: "swift", content: swiftContent, name: "Swift" },
    { type: "kotlin", content: kotlinContent, name: "Kotlin" },
  ]}
/>

You should make sure to call `collectDeviceIdentifiers()` after the _Purchases SDK_ is configured, and before the first purchase occurs. It's safe to call this multiple times, as only the new/updated values will be sent to RevenueCat.

:::danger Device identifiers with iOS App Tracking Transparency (iOS 14.5+)
If you are requesting the App Tracking permission through ATT to access the IDFA, you can call `.collectDeviceIdentifiers()` _again_ if the customer accepts the permission to update the `$idfa` attribute in RevenueCat.
:::

:::info Import AdSupport Framework (iOS)
The AdSupport framework is required to access the IDFA parameter on iOS. Don't forget to import this into your project.
:::

![Import AdSupport Framework](/docs_images/integrations/attribution/import-adsupport-framework.png)

## 3. Configure Airbridge in the RevenueCat dashboard

After your SDK is ready and device data is flowing, finish the setup in RevenueCat:

1. Navigate to your project settings in the RevenueCat dashboard and choose **Airbridge** from the Integrations menu.
2. Enter your **Airbridge Token**. This token authenticates requests from RevenueCat to Airbridge.
3. Add the **Airbridge Subdomain (app name)** exactly as it appears in the Airbridge workspace (for example, `testapp`). Events will be routed to this app.

![](/docs_images/integrations/attribution/airbridge/airbridge-configuration.png)

4. Provide event names for each lifecycle event RevenueCat will send, or choose **Use default event names** to populate the recommended mapping:

   | RevenueCat lifecycle event | Default Airbridge event name | Required |
   | :------------------------- | :--------------------------- | :------- |
   | Initial purchase           | `Purchase`                   | ✅       |
   | Trial started              | `Start Trial`                | ✅       |
   | Trial converted            | `Purchase`                   | ✅       |
   | Trial cancelled            | `Cancelled Trial`            | ✅       |
   | Renewal                    | `Purchase`                   | ✅       |
   | Cancellation               | `Cancellation`               | ✅       |
   | Non-renewing purchase      | `Non Subscription Purchase`  | Optional |
   | Expiration                 | `Expiration`                 | Optional |
   | Billing issue              | `Billing Issue`              | Optional |
   | Product change             | `Product Change`             | Optional |

   Customize any names to match the event definitions you have configured inside Airbridge.

5. Select how RevenueCat should report revenue totals using the **Revenue reporting mode** menu:
   - `Gross` reports transaction amounts before app store commission and taxes.
   - `Net` reports revenue after estimated store commission and/or taxes.

6. Click **Add integration** (or **Save**) to enable the connection.

## 4. Test the Airbridge integration

Before rolling out the integration, run through an end-to-end test:

1. Make a sandbox purchase with a new user after confirming the device identifiers from step 2 are present.
2. Visit the [Customer View](/dashboard-and-metrics/customer-profile) for the tester and confirm the Airbridge attributes are listed.
3. Open the test transaction in Customer History and ensure an Airbridge event was delivered successfully. You can also review the **Last dispatched events** panel in the integration settings for a delivery log.

:::success You're all set!
Once configured, you should begin to see RevenueCat lifecycle events appear in Airbridge aligned with the campaigns that sourced those users.
:::
